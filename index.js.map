{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightBoxGallery;\n\nexport function drawGallery(images, append = false) {\n  const gallery = document.querySelector('.gallery');\n  if (!append) {\n    gallery.innerHTML = '';\n  }\n  images.forEach(item => {\n    gallery.innerHTML += galleryItemTemplate(item);\n  });\n  if (lightBoxGallery) {\n    lightBoxGallery.refresh();\n  } else {\n    initializeGallery();\n  }\n}\n\nexport function clearGallery() {\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = '';\n}\n\nfunction galleryItemTemplate(item) {\n  return `<li class=\"gallery-item\">\n              <a class=\"gallery-link\" href=\"${item.largeImageURL}\">\n                  <img\n                  class=\"gallery-image\"\n                  src=\"${item.webformatURL}\"\n                  data-source=\"${item.largeImageURL}\"\n                  alt=\"${item.tags}\"\n                  />\n              </a>\n                <div class=\"card-overlay\">\n                    <div class=\"param\">\n                        <span class=\"param-title\">Likes</span>\n                        <span class=\"param-value\">${item.likes}</span>\n                    </div>\n                    <div class=\"param\">\n                        <span class=\"param-title\">Views</span>\n                        <span class=\"param-value\">${item.views}</span>\n                    </div>\n                    <div class=\"param\">\n                        <span class=\"param-title\">Comments</span>\n                        <span class=\"param-value\">${item.comments}</span>\n                    </div>\n                    <div class=\"param\">\n                        <span class=\"param-title\">Downloads</span>\n                        <span class=\"param-value\">${item.downloads}</span>\n                    </div>\n                </div>\n           </li>`;\n}\n\nfunction initializeGallery() {\n  lightBoxGallery = new SimpleLightbox('.gallery a', {\n    overlayOpacity: 0.8,\n    captions: true,\n    captionsData: 'alt',\n    captionPosition: 'outside',\n    captionDelay: '250',\n  });\n}\n","import axios from 'axios';\n\nconst API_PIXABAY_URL = 'https://pixabay.com/api/';\nconst API_KEY = '49290147-91bc44204d790a43c13c008af';\n\nconst itemsPerPage = 15;\nlet currentPage = 1;\nlet searchText = '';\n\nexport async function getFirstPhotosBlock(search) {\n  currentPage = 1;\n  searchText = search;\n  return await getPhotos(search);\n}\n\nexport async function getNextPhotosBlock() {\n  currentPage++;\n  return await getPhotos(searchText);\n}\n\nasync function getPhotos(text) {\n  try {\n    debugger;\n    const encodedText = encodeURIComponent(text);\n    const params = {\n      key: API_KEY,\n      q: encodedText,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: itemsPerPage,\n      page: currentPage,\n    };\n\n    const response = await axios.get(API_PIXABAY_URL, { params });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching photos:', error);\n    throw error;\n  }\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { clearGallery, drawGallery } from './js/render-functions';\nimport { getFirstPhotosBlock, getNextPhotosBlock } from './js/pixabay-api';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  setupEventListeners();\n});\n\nfunction setupEventListeners() {\n  document.querySelector('form.form').addEventListener('submit', handleSearch);\n  document\n    .querySelector('.button.load-more')\n    .addEventListener('click', handleLoadMore);\n}\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  const searchText = event.target.querySelector('input').value;\n  if (!searchText.trim()) return;\n\n  clearGallery();\n  toggleLoader(true);\n\n  try {\n    const data = await getFirstPhotosBlock(searchText);\n    handleGalleryUpdate(data);\n  } catch (error) {\n    iziToastError('Error fetching images: ' + error.message);\n  } finally {\n    toggleLoader(false);\n  }\n}\n\nasync function handleLoadMore(event) {\n  event.preventDefault();\n  toggleLoader(true);\n\n  try {\n    const data = await getNextPhotosBlock();\n    handleGalleryUpdate(data, true);\n    smoothScroll();\n  } catch (error) {\n    iziToastError('Error fetching images: ' + error.message);\n  } finally {\n    toggleLoader(false);\n  }\n}\n\nfunction handleGalleryUpdate(data, append = false) {\n  if (data.hits.length) {\n    drawGallery(data.hits, append);\n    document.querySelector('.button.load-more').style.display = 'block';\n  } else {\n    iziToastError(\"We're sorry, but you've reached the end of search results.\");\n    document.querySelector('.button.load-more').style.display = 'none';\n  }\n}\n\nfunction smoothScroll() {\n  const gallery = document.querySelector('.gallery');\n  if (gallery) {\n    const cardHeight =\n      gallery.firstElementChild?.getBoundingClientRect().height || 0;\n    window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n  }\n}\n\nfunction iziToastError(errorMessage) {\n  iziToast.error({\n    message: errorMessage,\n    close: true,\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    messageColor: '#FAFAFB',\n    maxWidth: '432px',\n    class: 'custom-iziToast',\n  });\n}\n\nfunction toggleLoader(show) {\n  document.querySelector('.loader').style.display = show ? 'block' : 'none';\n}\n"],"names":["lightBoxGallery","drawGallery","images","append","gallery","item","galleryItemTemplate","initializeGallery","clearGallery","SimpleLightbox","API_PIXABAY_URL","API_KEY","itemsPerPage","currentPage","searchText","getFirstPhotosBlock","search","getPhotos","getNextPhotosBlock","text","encodedText","params","axios","error","setupEventListeners","handleSearch","handleLoadMore","event","toggleLoader","data","handleGalleryUpdate","iziToastError","smoothScroll","cardHeight","_a","errorMessage","iziToast","show"],"mappings":"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"}